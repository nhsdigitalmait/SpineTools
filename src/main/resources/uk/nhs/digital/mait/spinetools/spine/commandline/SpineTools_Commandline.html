<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>SpineTools Commandline</title>
	<meta name='Generator' content='Zim 0.62'>
	<style type='text/css'>
		a          { text-decoration: none      }
		a:hover    { text-decoration: underline }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: #2e3436;            }
		pre        { color: #2e3436;
					 margin-left: 20px          }
		h1         { text-decoration: underline;
					 color: #4e9a06; margin-bottom: 0 }
		h2         { color: #4e9a06; margin-bottom: 0 }
		h3         { color: #4e9a06; margin-bottom: 0 }
		h4         { color: #4e9a06; margin-bottom: 0 }
		h5         { color: #4e9a06; margin-bottom: 0 }
		p          { margin-top: 0              }
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */
	</style>
</head>
<body>

<!-- Header -->
<div class='header'>
	[ <span class='insen'>Prev</span> ]

	[ <span class='insen'>Index</span> ]

	[ <span class='insen'>Next</span> ]
</div>

<hr />

<!-- Wiki content -->

<div class='pages'>
	<div class='heading'>
	<h1>SpineTools Commandline <a name='SpineTools Commandline'></a></h1>
	</div>

	<div class='content'>
	<p>
Created Thursday 30 July 2015
</p>

<p>
Command line for calling SpineTools (Java) library, partly as a utility, partly as an example of how to use it to do things, and partly for running demonstrations. No intention to do the same for the C# version where the SpineToolsTest class will do.
</p>

<p>
Usage: java -jar $jarname propertiesfile command args
</p>

<p>
The properties file is loaded into the JVM System.properties.
</p>

<p>
Commands are:
</p>

<p>
<ul>
<li><b>send </b>Send a single file as a message</li>
<li><b>sendpayload</b> Send a single file containing an HL7 message payload</li>
<li><b>xmitde</b> Sends a file containing ITK distribution envelope XML, as an ITK Trunk message</li>
<li><b>sendall</b> Send all files in a directory, as messages</li>
<li><b>receive</b> Receive messages from Spine</li>
</ul>
</p>

<p>
Each command has its own set of parameters, although three common parameters are supported to provide overrides for data held either in the system properties, or read from SDS:
</p>

<p>
<ul>
<li><i>targetASID</i> overrides the <tt>uk.nhs.digital.mait.spinetools.spine.toasid</tt> property</li>
<li><i>targetPartyKey</i> overrides the <tt>uk.nhs.digital.mait.spinetools.spine.topartykey</tt> property</li>
<li><i>odsCode</i> overrides the <tt>uk.nhs.digital.mait.spinetools.spine.odstarget </tt>property</li>
<li><i>authorRole</i> overrides the <tt>uk.nhs.digital.mait.spinetools.spine.authorrole</tt> property</li>
<li><i>authorURP</i> overrides the <tt>uk.nhs.digital.mait.spinetools.spine.authorurp</tt> property</li>
<li><i>authorUID</i> overrides the <tt>uk.nhs.digital.mait.spinetools.spine.authoruid</tt> property</li>
</ul>
</p>

<p>
A final parameter is recognised by all commands:
</p>

<p>
<ul>
<li><i>nosend</i> will cause any SDS operations to be completed (hence building the local SDS cache) but will not actually result in messages being sent. If <i>nosend</i> is set, then</li>
<li><i>dumpmessage</i> will cause the fully-wrapped message to be written to stdout.</li>
</ul>
</p>

<p>
Treatment of these common parameters depends on the command, and are detailed below.
</p>

<h3>send</h3>

<br>

<p>
Usage: send file qualifier
</p>

<p>
Sends a single file containing HL7 interaction XML. 
</p>

<p>
<ul>
<li><i>file. </i>The file containing the message to be sent</li>
<li><i>qualifier.</i> The Spine service qualifier. Messages in the directory are assumed to be wrapped HL7 interaction XML which the <i>sendall</i> command will package as Spine SOAP or ebXML. HL7 XML does not know about service qualifiers and there are some cases where the same interaction can be sent under more than one.</li>
</ul>
</p>

<p>
The <i>odsCode</i> property override is of the recipient. This will default to the value of the <tt>uk.nhs.digital.mait.spinetools.spine.odstarget</tt> system property. The <i>targetPartyKey</i> property override can be used to refine any SDS lookup on the odsCode but must be used with caution as it can result in no resolution of target endpoint details. Other property overrides are ignored. 
</p>

<p>
<tt>java -jar STCommand.jar test.properties send c:/messages/example.msg urn:nhs:names:services:mm odsCode=YES</tt>
</p>

<h3>sendpayload</h3>

<br>

<p>
Usage: sendpayload file interaction qualifier
</p>

<p>
Sends a single file containing an HL7 payload
</p>

<p>
<ul>
<li><i>file. </i>The file containing the message to be sent</li>
<li><i>interaction</i>. The HL7 interaction id</li>
<li><i>qualifier.</i> The Spine service qualifier. Messages in the directory are assumed to be wrapped HL7 interaction XML which the <i>sendall</i> command will package as Spine SOAP or ebXML. HL7 XML does not know about service qualifiers and there are some cases where the same interaction can be sent under more than one.</li>
</ul>
</p>

<p>
All property overrides can be used from the command line.
</p>

<p>
<tt>java -jar STCommand.jar test.properties sendpayload c:/messages/example.xml PORX_IN020101UK31 urn:nhs:names:services:mm odsCode=YES</tt>
</p>

<h3>xmitde</h3>

<br>

<p>
Usage: xmitde file
</p>

<p>
Sends a single file containing ITK distribution envelope content
</p>

<p>
<ul>
<li><i>file. </i>The file containing the distribution envelope to be sent</li>
</ul>
</p>

<p>
The <i>odsCode</i> property override is honoured, and the <i>targetAsid</i> and <i>targetPartyKey </i>overrides may be used to refine the SDS lookup which the xmitde command will use to resolve ITK Trunk delivery details for the target ODS code. The three "author" property overrides are not used in ITK Trunk and are ignored.
</p>

<p>
<tt>java -jar STCommand.jar test.properties xmitde c:/messages/examplede.xml odsCode=RHM</tt>
</p>

<h3>sendall</h3>

<br>

<p>
Usage: sendall directory qualifier
</p>

<p>
<ul>
<li><i>directory. </i>The directory from which messages are to be sent</li>
<li><i>qualifier.</i> The Spine service qualifier. Messages in the directory are assumed to be wrapped HL7 interaction XML which the <i>sendall</i> command will package as Spine SOAP or ebXML. HL7 XML does not know about service qualifiers and there are some cases where the same interaction can be sent under more than one.</li>
</ul>
</p>

<p>
The <i>odsCode</i> property override is of the recipient. This will default to the value of the <tt>uk.nhs.digital.mait.spinetools.spine.odstarget</tt> system property. The <i>targetPartyKey</i> property override can be used to refine any SDS lookup on the odsCode but must be used with caution as it can result in no resolution of target endpoint details. Other property overrides are ignored. 
</p>

<p>
Example: A directory full of PORX_IN020101UK32 prescription messages are to be sent, from C:\messages on a Windows machine:
</p>

<p>
<tt>java -jar STCommand.jar test.properties sendall c:/messages urn:nhs:names:services:mm odsCode=YES</tt>
</p>

<h3>receive</h3>

<br>

<p>
Usage: receive
</p>

<p>
No additional parameters. All configuration is via system properties given in the properties file. Property override values are ignored.
</p>

<p>
Example:
</p>

<p>
<tt>java -jar STCommand.jar test.properties receive</tt>
</p>

<br>
<br>


	</div>

	<br />

	<div class='page-footer'>

	</div>

	

</div>

</body>
</html>
